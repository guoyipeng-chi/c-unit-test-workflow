# Cè¯­è¨€å•å…ƒæµ‹è¯•è‡ªåŠ¨åŒ–å·¥ä½œæµ - æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“Š ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         C Unit Test Workflow Architecture                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Interface Layer                                         â”‚
â”‚  â”œâ”€ main.py              (ä¸»é›†æˆè„šæœ¬)                        â”‚
â”‚  â”œâ”€ quickstart.py        (å¿«é€Ÿå¼€å§‹)                          â”‚
â”‚  â”œâ”€ quickstart.sh        (Linux/Macå¯åŠ¨)                     â”‚
â”‚  â””â”€ quickstart.bat       (Windowså¯åŠ¨)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Workflow Engine Layer                                        â”‚
â”‚  â”œâ”€ ut_workflow.py       (ä»£ç åˆ†æå’Œæµ‹è¯•ç”Ÿæˆ)                â”‚
â”‚  â”œâ”€ test_executor.py     (ç¼–è¯‘å’Œæ‰§è¡Œç®¡ç†)                    â”‚
â”‚  â””â”€ CMakeLists.txt       (æ„å»ºé…ç½®)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Analysis & Generation Layer                                  â”‚
â”‚  â”œâ”€ c_code_analyzer.py   (Cä»£ç è§£æ)                         â”‚
â”‚  â”‚  â”œâ”€ å‡½æ•°ç­¾åæå–                                          â”‚
â”‚  â”‚  â”œâ”€ ä¾èµ–å…³ç³»åˆ†æ                                          â”‚
â”‚  â”‚  â””â”€ Mockæ£€æµ‹                                              â”‚
â”‚  â”‚                                                            â”‚
â”‚  â””â”€ gtest_generator.py   (GTestä»£ç ç”Ÿæˆ)                     â”‚
â”‚     â”œâ”€ Mockå®ç”Ÿæˆ                                            â”‚
â”‚     â”œâ”€ Fixtureç±»ç”Ÿæˆ                                         â”‚
â”‚     â”œâ”€ æµ‹è¯•ç”¨ä¾‹æ¨¡æ¿                                          â”‚
â”‚     â””â”€ æ–­è¨€ç”Ÿæˆ                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Compilation & Execution Layer                                â”‚
â”‚  â”œâ”€ CMake (ç¼–è¯‘ç³»ç»Ÿ)                                          â”‚
â”‚  â”‚  â”œâ”€ æºæ–‡ä»¶ç¼–è¯‘                                            â”‚
â”‚  â”‚  â”œâ”€ æµ‹è¯•é“¾æ¥                                              â”‚
â”‚  â”‚  â””â”€ GTesté›†æˆ                                             â”‚
â”‚  â”‚                                                            â”‚
â”‚  â””â”€ GTest (æµ‹è¯•æ¡†æ¶)                                         â”‚
â”‚     â”œâ”€ æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œ                                          â”‚
â”‚     â”œâ”€ ç»“æœæ–­è¨€                                              â”‚
â”‚     â””â”€ æŠ¥å‘Šç”Ÿæˆ                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Target Code (å¾…æµ‹è¯•ä»£ç )                                     â”‚
â”‚  â”œâ”€ src/                 (Cæºæ–‡ä»¶)                            â”‚
â”‚  â”œâ”€ include/             (å¤´æ–‡ä»¶)                             â”‚
â”‚  â””â”€ test/                (ç”Ÿæˆçš„æµ‹è¯•ä»£ç )                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ å·¥ä½œæµç¨‹æ­¥éª¤

### æ­¥éª¤1: ä»£ç åˆ†æ (Code Analysis)

```python
CCodeAnalyzer
â”œâ”€â”€ analyze_directory()
â”‚   â”œâ”€â”€ éå† include/ ç›®å½•
â”‚   â”œâ”€â”€ éå† src/ ç›®å½•
â”‚   â””â”€â”€ å¯¹æ¯ä¸ª .c/.h æ–‡ä»¶è°ƒç”¨ analyze_file()
â”‚
â””â”€â”€ analyze_file(filepath)
    â”œâ”€â”€ æå– #include å£°æ˜
    â”œâ”€â”€ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–å‡½æ•°å®šä¹‰
    â”‚   Pattern: (\w+)\s+(\w+)\s*\(\s*([^)]*)\s*\)\s*\{
    â”‚   åŒ¹é…: è¿”å›ç±»å‹ å‡½æ•°å (å‚æ•°åˆ—è¡¨)
    â”‚
    â”œâ”€â”€ è§£æå‡½æ•°å‚æ•°åˆ—è¡¨
    â”‚   â”œâ”€â”€ æå–å‚æ•°ç±»å‹
    â”‚   â”œâ”€â”€ æå–å‚æ•°å
    â”‚   â””â”€â”€ è¿”å› List[(type, name), ...]
    â”‚
    â””â”€â”€ æå–å‡½æ•°ä½“å†…çš„å‡½æ•°è°ƒç”¨
        â”œâ”€â”€ å®šä½å‡½æ•°ä½“ {...}
        â”œâ”€â”€ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ‰¾åˆ°æ‰€æœ‰å‡½æ•°è°ƒç”¨
        â”œâ”€â”€ è¿‡æ»¤æ‰å…³é”®å­— (if, while, forç­‰)
        â””â”€â”€ è¿”å›å¤–éƒ¨è°ƒç”¨é›†åˆ

è¾“å‡ºæ•°æ®ç»“æ„:
â”Œâ”€ FunctionDependency
â”‚  â”œâ”€ name: str                    # å‡½æ•°å
â”‚  â”œâ”€ return_type: str             # è¿”å›ç±»å‹
â”‚  â”œâ”€ parameters: List[tuple]      # å‚æ•°åˆ—è¡¨
â”‚  â”œâ”€ external_calls: Set[str]     # éœ€è¦Mockçš„å‡½æ•°
â”‚  â”œâ”€ source_file: str             # æºæ–‡ä»¶è·¯å¾„
â”‚  â””â”€ include_files: Set[str]      # ä¾èµ–çš„å¤´æ–‡ä»¶
â””â”€
```

### æ­¥éª¤2: æµ‹è¯•ä»£ç ç”Ÿæˆ (Test Code Generation)

```python
GTestGenerator
â”œâ”€â”€ generate_test_file(func_dep)
â”‚   â”œâ”€â”€ _generate_header()
â”‚   â”‚   â”œâ”€â”€ ç”Ÿæˆ #include è¯­å¥
â”‚   â”‚   â””â”€â”€ å¯¼å…¥ testing å‘½åç©ºé—´
â”‚   â”‚
â”‚   â”œâ”€â”€ _generate_mock_defines()
â”‚   â”‚   â”œâ”€â”€ éå† external_calls
â”‚   â”‚   â””â”€â”€ ä¸ºæ¯ä¸ªå¤–éƒ¨è°ƒç”¨ç”ŸæˆMockæ³¨é‡Š
â”‚   â”‚
â”‚   â”œâ”€â”€ _generate_fixture_class()
â”‚   â”‚   â”œâ”€â”€ åˆ›å»º Test Fixture ç±»
â”‚   â”‚   â”œâ”€â”€ å®ç° SetUp()
â”‚   â”‚   â””â”€â”€ å®ç° TearDown()
â”‚   â”‚
â”‚   â””â”€â”€ _generate_test_cases()
â”‚       â”œâ”€â”€ _generate_basic_test_cases()
â”‚       â”‚   â”œâ”€â”€ ç”Ÿæˆæ­£å¸¸æƒ…å†µæµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ ç”Ÿæˆè¾¹ç•Œæ¡ä»¶æµ‹è¯•
â”‚       â”‚   â””â”€â”€ ç”Ÿæˆé”™è¯¯å¤„ç†æµ‹è¯•
â”‚       â”‚
â”‚       â””â”€â”€ å¯¹æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ:
â”‚           â”œâ”€â”€ TEST_F å®åŒ…è£…
â”‚           â”œâ”€â”€ Arrange éƒ¨åˆ†
â”‚           â”œâ”€â”€ Act éƒ¨åˆ†
â”‚           â””â”€â”€ Assert éƒ¨åˆ†

ç”Ÿæˆæ–‡ä»¶ç¤ºä¾‹:
å‡½æ•°: validate_score(float score) -> int32_t

ç”Ÿæˆæ–‡ä»¶: test/validate_score_test.cpp
â”œâ”€ Header and Includes
â”œâ”€ Mock Definitions
â”œâ”€ Test Fixture Class
â””â”€ Test Cases:
   â”œâ”€ TEST_F(ValidateScoreTest, TestCase1_NormalCase)
   â”œâ”€ TEST_F(ValidateScoreTest, TestCase2_BoundaryCase)
   â””â”€ TEST_F(ValidateScoreTest, TestCase3_ErrorCase)
```

### æ­¥éª¤3: ç¼–è¯‘æ„å»º (Build)

```
CMake Build Process
â”œâ”€â”€ CMake Configuration
â”‚   â”œâ”€â”€ cmake .. -G <Generator>
â”‚   â”œâ”€â”€ è§£æ CMakeLists.txt
â”‚   â”œâ”€â”€ æŸ¥æ‰¾ç¼–è¯‘å™¨
â”‚   â”œâ”€â”€ ä¸‹è½½ GTest (è‡ªåŠ¨)
â”‚   â””â”€â”€ ç”Ÿæˆæ„å»ºæ–‡ä»¶
â”‚
â””â”€â”€ Compilation
    â”œâ”€â”€ ç¼–è¯‘æºæ–‡ä»¶ (database.c, validator.c, student_manager.c)
    â”œâ”€â”€ ç¼–è¯‘æµ‹è¯•æ–‡ä»¶ (*_test.cpp)
    â”œâ”€â”€ é“¾æ¥ GTeståº“
    â””â”€â”€ ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ (*_test.exe æˆ– *_test)
```

### æ­¥éª¤4: æµ‹è¯•æ‰§è¡Œ (Test Execution)

```
Test Execution Pipeline
â”œâ”€â”€ Discover Test Executables
â”‚   â”œâ”€â”€ Windows: æŸ¥æ‰¾ *.exe (testç›®å½•å’Œbuildç›®å½•)
â”‚   â””â”€â”€ Linux: æŸ¥æ‰¾æ— æ‰©å±•åçš„å¯æ‰§è¡Œæ–‡ä»¶
â”‚
â”œâ”€â”€ Run Each Test
â”‚   â”œâ”€â”€ æ•è· stdout/stderr
â”‚   â”œâ”€â”€ è®¾ç½®æ‰§è¡Œè¶…æ—¶ (30ç§’)
â”‚   â””â”€â”€ è¿”å›é€€å‡ºç 
â”‚
â”œâ”€â”€ Parse GTest Output
â”‚   â”œâ”€â”€ æå–æ€»æµ‹è¯•æ•°: "[  ----------  ] X tests"
â”‚   â”œâ”€â”€ æå–é€šè¿‡æ•°: "[  PASSED  ] X tests"
â”‚   â”œâ”€â”€ æå–å¤±è´¥æ•°: "[  FAILED  ] X tests"
â”‚   â””â”€â”€ æå–å¤±è´¥è¯¦æƒ…: "[ FAILED ] ..."
â”‚
â””â”€â”€ Generate Report
    â”œâ”€â”€ æ€»ç»“ç»Ÿè®¡æ•°æ®
    â”œâ”€â”€ è®¡ç®—é€šè¿‡ç‡
    â””â”€â”€ è¾“å‡ºå¤±è´¥è¯¦æƒ…
```

## ğŸ’¾ æ•°æ®æµè½¬

```
æºä»£ç æ–‡ä»¶          ä»£ç åˆ†æ          æµ‹è¯•ç”Ÿæˆ           ç¼–è¯‘é“¾æ¥          æ‰§è¡ŒéªŒè¯
(*.c, *.h)    â†’  (FunctionDep) â†’  (test_*.cpp)  â†’  (test_*.exe)  â†’  (æµ‹è¯•æŠ¥å‘Š)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ database.h  â”‚â”€â”€â”
â”‚ database.c  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”œâ”€â”€â”€â†’â”‚ Analyzer     â”‚â”€â”€â”€â†’â”‚ db_*_test.cpp   â”‚â”€â”€â”€â†’â”‚ Test Exe â”‚â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚validator.h  â”‚â”€â”€â”¤                        â”‚validator_test.cppâ”‚                  â”‚
â”‚validator.c  â”‚  â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                        â”‚student_mgr...cpp â”‚â”€â”€â”€â†’â”‚ GTest    â”‚â”€â”€â”¼â”€â”€â†’ Report
                 â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ Frameworkâ”‚  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚student_mgr.h   â”‚                                                              â”‚
â”‚student_mgr.c   â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                              â”‚
                                                                                 â–¼
                                                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                            â”‚ Pass: X/Y   â”‚
                                                                            â”‚ Fail: A/Y   â”‚
                                                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Mockå®å®šä¹‰å±‚æ¬¡ç»“æ„

```
Mockå®šä¹‰ä»ä½åˆ°é«˜çš„ä¼˜å…ˆçº§:

1ï¸âƒ£  è‡ªåŠ¨ç”Ÿæˆçš„é»˜è®¤Mockå€¼ (GTest Generator)
    â†“
    /* ========== MOCK DEFINITIONS ========== */
    // #define MOCK_VALIDATE_SCORE_RETURN_VALUE  0
    /* ============================================ */

2ï¸âƒ£  ç”¨æˆ·å–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹ (Manual Edit)
    â†“
    /* ========== MOCK DEFINITIONS ========== */
    #define MOCK_VALIDATE_SCORE_RETURN_VALUE  -1
    /* ============================================ */

3ï¸âƒ£  åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨Mockå€¼ (Test Code)
    â†“
    #ifdef MOCK_VALIDATE_SCORE_RETURN_VALUE
        mock_result = MOCK_VALIDATE_SCORE_RETURN_VALUE;
    #endif
```

## ğŸ“ æµ‹è¯•ç”¨ä¾‹æ¨¡æ¿

æ¯ä¸ªå‡½æ•°éƒ½ä¼šç”Ÿæˆä¸‰ç±»æµ‹è¯•ç”¨ä¾‹:

### ç±»å‹1: æ­£å¸¸æƒ…å†µ (Normal Case)
```cpp
TEST_F(FunctionNameTest, TestCase1_NormalCase) {
    // Arrange: è®¾ç½®æ­£å¸¸è¾“å…¥
    // Act: è°ƒç”¨è¢«æµ‹è¯•å‡½æ•°
    // Assert: éªŒè¯æ­£å¸¸è¾“å‡º
    EXPECT_EQ(result, expected_normal_value);
}
```

### ç±»å‹2: è¾¹ç•Œæ¡ä»¶ (Boundary Case)
```cpp
TEST_F(FunctionNameTest, TestCase2_BoundaryCase) {
    // Arrange: è®¾ç½®è¾¹ç•Œå€¼ (0, MAX, MINç­‰)
    // Act: è°ƒç”¨è¢«æµ‹è¯•å‡½æ•°
    // Assert: éªŒè¯è¾¹ç•Œä¸Šçš„è¡Œä¸º
    EXPECT_EQ(result, expected_boundary_value);
}
```

### ç±»å‹3: é”™è¯¯å¤„ç† (Error Case)
```cpp
TEST_F(FunctionNameTest, TestCase3_ErrorCase) {
    // Arrange: è®¾ç½®æ— æ•ˆè¾“å…¥ (NULL, è¶…å‡ºèŒƒå›´ç­‰)
    // Act: è°ƒç”¨è¢«æµ‹è¯•å‡½æ•°
    // Assert: éªŒè¯é”™è¯¯å¤„ç†
    EXPECT_NE(result, 0);  // æœŸæœ›è¿”å›é”™è¯¯ç 
}
```

## ğŸ”§ å…³é”®ç±»å’Œæ–¹æ³•

### CCodeAnalyzer ç±»

```python
class CCodeAnalyzer:
    def __init__(include_dir, src_dir)
    def analyze_directory()           # åˆ†ææ•´ä¸ªç›®å½•
    def analyze_file(filepath)        # åˆ†æå•ä¸ªæ–‡ä»¶
    def get_function_dependencies(func_name)  # è·å–å‡½æ•°ä¾èµ–
    def get_all_functions()           # è·å–æ‰€æœ‰åˆ†æçš„å‡½æ•°
```

### GTestGenerator ç±»

```python
class GTestGenerator:
    def generate_test_file(func_dep, output_file)  # ç”Ÿæˆæµ‹è¯•æ–‡ä»¶
    def _generate_header(func_dep)
    def _generate_mock_defines(func_dep)
    def _generate_fixture_class(func_dep)
    def _generate_test_cases(func_dep)
    def _generate_basic_test_cases(func_dep)
```

### TestExecutor ç±»

```python
class TestExecutor:
    def build_tests()      # CMakeç¼–è¯‘
    def run_tests()        # è¿è¡Œæµ‹è¯•
    def _find_test_executables()
    def _parse_gtest_output(stdout, stderr)
    def print_summary(results)
```

## ğŸ“Š å…³é”®é…ç½®ç‚¹

### CMakeLists.txt ä¸­çš„å…³é”®é…ç½®

```cmake
# 1. åŒ…å«ç›®å½•
include_directories(include)

# 2. æºæ–‡ä»¶åˆ—è¡¨
set(SOURCES
    src/database.c
    src/validator.c
    src/student_manager.c
)

# 3. GTesté›†æˆ
FetchContent_Declare(googletest ...)
FetchContent_MakeAvailable(googletest)

# 4. æµ‹è¯•ç›®æ ‡
add_executable(xxx_test test/xxx_test.cpp ${SOURCES})
target_link_libraries(xxx_test gtest gtest_main)

# 5. æ³¨å†Œæµ‹è¯•
add_test(NAME XxxTest COMMAND xxx_test)
```

### ç¼–è¯‘é€‰é¡¹

```
Windows: Visual Studio 2019 or later
Linux:   GCC/Clang with C99 standard
Mac:     Clang with C99 standard

Cæ ‡å‡†: C99 (-std=c99)
C++æ ‡å‡†: C++14 (-std=c++14)
```

## ğŸš€ æ‰©å±•ç‚¹

### 1. æ·»åŠ æ–°çš„Mockç­–ç•¥

ä¿®æ”¹ `GTestGenerator._generate_mock_defines()` æ–¹æ³•

### 2. è‡ªå®šä¹‰æµ‹è¯•æ•°æ®ç”Ÿæˆ

ä¿®æ”¹ `GTestGenerator._generate_arrange()` æ–¹æ³•

### 3. è‡ªå®šä¹‰æ–­è¨€é€»è¾‘

ä¿®æ”¹ `GTestGenerator._generate_assert()` æ–¹æ³•

### 4. æ”¯æŒæ–°çš„å‡½æ•°ç­¾åæ¨¡å¼

ä¿®æ”¹ `CCodeAnalyzer` ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼

```python
# å½“å‰æ”¯æŒçš„æ¨¡å¼:
r'(\w+)\s+(\w+)\s*\(\s*([^)]*)\s*\)\s*\{'

# å¯ä»¥æ‰©å±•æ”¯æŒ:
- å‡½æ•°æŒ‡é’ˆ
- å®å®šä¹‰çš„ç±»å‹
- æ¡ä»¶ç¼–è¯‘
```

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

```
åˆ†æé˜¶æ®µ:     < 100ms (å…¸å‹é¡¹ç›®)
ç”Ÿæˆé˜¶æ®µ:     < 500ms (ç”Ÿæˆæ‰€æœ‰æµ‹è¯•)
ç¼–è¯‘é˜¶æ®µ:     5-60ç§’ (å–å†³äºæºä»£ç é‡)
æ‰§è¡Œé˜¶æ®µ:     < 10ç§’ (æ‰§è¡Œæ‰€æœ‰æµ‹è¯•)
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2026å¹´2æœˆ13æ—¥  
**ä½œè€…**: C Unit Test Workflow Team
